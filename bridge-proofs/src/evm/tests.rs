mod tests {
    use crate::evm::types::{BlockHeader, LogEntry, Receipt};
    use ethereum::Header;
    use ethers::types::{EIP1186ProofResponse, U256, U64};
    use ethers_core::types::Log;
    use rlp::Encodable;
    use serde::{Deserialize, Serialize};

    use ethereum_types::{Address, H256};
    use serde_json::Value;

    use crate::evm::verify_trie_proof::TrieProver;

    fn parse_eth_get_proof(proof: &str) -> EIP1186ProofResponse {
        serde_json::from_str(proof).unwrap()
    }

    fn parse_eth_get_logs(logs: &str) -> Vec<Log> {
        serde_json::from_str(logs).unwrap()
    }

    fn parse_block_header(header: &str) -> BlockHeader {
        let header: BlockHeader = serde_json::from_str(header).unwrap();
        header
    }

    fn parse_receipt(receipt: &str) -> Receipt {
        serde_json::from_str(receipt).unwrap()
    }

    #[test]
    fn trie_proof_works_for_eip1186_response() {
        // Parse hardcoded Merkle trie proof
        let hardcoded_proof = r#"{
            "address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df",
            "balance":"0x0",
            "codeHash":"0x887da3cea6169f31edeb72a08a8ddb87ac755b6d39dbd9fe692e64db48d01d39",
            "nonce":"0x1",
            "storageHash":"0x19cbdcf7cb8bea9507a1f96a7611d588335446f8ca27802fba36ab7c198fcb44",
            "accountProof":[
                "0xf901f1a0b6bf0093a89fc7d11249b8f3d53a9842056cb2217da061bb418cb1a47964b603a0c530dbaa948dfccae8cd27d79e9fd1d71102af7c96a014a32513c3da8b08d0aea0bed1ed1fc5339c7f7959ef025dcede0c99fda88c996486db7647fe49a0f1b519a0b1de04907155ac9102090f82ae04b5716d1cf2bd4d8e2424917d90ee415532bca0de26cb1b4fd99c4d3ed75d4a67931e3c252605c7d68e0148d5327f341bfd5283a022d331fc7c624c391c29236882aad4c424cf90cfbd8e8beb941ddccb29f8106ba0196e0e1c4cd3799ba92dd2568734588a541e9b0d1f0c12bfe94732cd178e594da0c8f5daad4e5dc27440870850040efab5630eb2def2d789cd937c3dcf22192b6aa03dc477ff2f714970ac68cfb6689040748fc8b8e06e474f1a0b55f91dae1c13bfa0f896992a4638f44afcbc158006dee53f163c08f167dead4f4a54f80de6b82ae2a083bdd6e2b5e69cd159491c0927352b543f6d34903fcb1f3f57bed9e06a0a1c8e80a0cdd1b5c6429a44802664273998a18f0b8831aeb39a60a314a3bf926b341add93a0f08144a0299820b6ea6a478811cd96b1907650cf55989b70efa879e536b2a6eca0a9e6cc0d5192cb036c2454c7cf19ff53abf1861b50043a7b3713bc003a5a7d88a0e649a289933a420c1f201faaad3dccd15e13538b85f38e76b6d40b23da7a3e3180",
                "0xf85180a0b86274a4b148d41ba047ae7aad1668f4507a417b5d4b582630d4023995b6f09580808080808080808080808080a00844a6824efe874b61c480f88d1b0639780aa16aefbad5647403fc7ea6c274b280",
                "0xf869a020952e86c2ad89a0772acc940e2c5a0eec5c4d95a70affe1f0c5de2387f7c5c2b846f8440180a019cbdcf7cb8bea9507a1f96a7611d588335446f8ca27802fba36ab7c198fcb44a0887da3cea6169f31edeb72a08a8ddb87ac755b6d39dbd9fe692e64db48d01d39"
            ],
            "storageProof":[{
                "key":"0xac33ff75c19e70fe83507db0d683fd3465c996598dc972688b7ace676c89077b",
                "proof":[
                    "0xf901b1a097166a38c9e39f2d5b7eb7c3c32cc22396387dc550398c8db7721c3c1a478810a01575f87884ba38a75d8041f28fb756e5f59d1eb62c6d3558e172e69d3040ec4d80a0b6df00330786f17ea6907ff7761f9dd8d59535ce0f7ba33f8cafac8e94ec8e5280a043bb357d4ce407cfe9cc415600471aff852eeb3f7dd18f9956040fdfdf083f74a08c7ebea2ae63915497f3a74ea13f8bbe492ef31c148de6139d23f74d2e292513a024844e957318bcf4fd3da57118509a3588e450161832cafb65c0d5dd4594b09fa06a2f79212553bf199ef7b02ef82b3762f96de6b59e87fa0b88423a242b98d0f4a0b073cbccb9b39181a17281696cc63aba42f849d5e7b5765fa542fd02fd4b3584a0fb9f130854c2908748a4b208dae8187b1d52b822ec83167dd23b6948a872e247a0cfa71aea3f693d5484f10ec42357ac692ccfe22b42040d63be8851b73c4f7c53a046b189e5114bf8d2deb463354d67c679c6eb6209816daeafed0eee6ef1e59ba7a02e548024ba626cf86ebc7983bcf693eec58969056be784a97f1e2ff536bfa00ba00dda30a304520b446db65f7a9fe612407b856e9b7fd20ee00e47be69276e33db8080",
                    "0xf8b180a09dda8ee0506dd8da6c3a9968c053a400ff92ef28c89891ea0ac45a6d3cd56515a0a6926de29bb0247c685826ee452d16972b739a19801bffcc3397af59247c2c4ba05babcf173c1b76ed504e16622d047bedfff34083c7639b05ac1c8eb551801002808080a029bfe029aaef01d61d071f5789e808802233cc795b322cd46954662dd9fdae178080808080a05a10b0c631b24115764ba1389a66fb11e2bc0ca5ceea00c741da0a0de555f061808080",
                    "0xf843a0202944a272ac5bae96b5bd2f67b6c13276d541dc09eb1cf414d96b19a09e1c2fa1a023ab323453748129f2765f79615022f5bebd6f4096a796300aab049a60b0f187"
                ],
                "value":"0x23ab323453748129f2765f79615022f5bebd6f4096a796300aab049a60b0f187"
            }]
        }"#;

        let address_hash_vec = hex::decode(
            "f1952e86c2ad89a0772acc940e2c5a0eec5c4d95a70affe1f0c5de2387f7c5c2",
        )
        .unwrap();

        let state_root_H256 = H256::from_slice((hex::decode(
            "4abc4de1c6dfac1f0b733be3797461bf1b0f7c2f2be11cc9f1137054fc4a1314",
        )
        .unwrap())
        .as_slice());

        let parsed_proof: EIP1186ProofResponse =
            parse_eth_get_proof(hardcoded_proof);

        let account_proof = parsed_proof
            .account_proof
            .into_iter()
            .map(|b| b.to_vec())
            .collect::<Vec<Vec<u8>>>();

        use rlp::RlpStream;
        let mut stream = RlpStream::new_list(4);
        stream
            .append(&parsed_proof.nonce)
            .append(&parsed_proof.balance)
            .append(&parsed_proof.storage_hash)
            .append(&parsed_proof.code_hash);
        let account_state_rlp = stream.out();

        // let account_state_rlp = hex::decode("f8440180a019cbdcf7cb8bea9507a1f96a7611d588335446f8ca27802fba36ab7c198fcb44a0887da3cea6169f31edeb72a08a8ddb87ac755b6d39dbd9fe692e64db48d01d39").unwrap();

        assert_eq!(
            hex::encode(TrieProver::verify_trie_proof(
                state_root_H256,
                address_hash_vec,
                account_proof,
            )),
            hex::encode(account_state_rlp)
        )
    }

    #[test]
    fn rainbow_test() {
        let expected_value = "f902a60183af4adfb9010000000000000000000000000000000000000000000000000000000000000000000800010000000000000002000100000000000000000000000000000000000000000000000000000008000008000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000010000000040000000000000000000000000000000200000000010000000000000000000000000000000000200080000000202000000000000000000000000000004000000000000002000000000000000000000000000000000000080000000000000000000000000000000000000000000200000004000000000000000000000000000000f9019bf89b94a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000c22df065a81f6e0107e214991b9d7fb179d401b3a000000000000000000000000023ddd3e3692d1861ed57ede224608875809e127fa00000000000000000000000000000000000000000000000000000000005f5e100f8fc9423ddd3e3692d1861ed57ede224608875809e127ff863a0dd85dc56b5b4da387bf69c28ec19b1d66e793e0d51b567882fa31dc50bbd32c5a0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48a0000000000000000000000000c22df065a81f6e0107e214991b9d7fb179d401b3b8800000000000000000000000000000000000000000000000000000000005f5e1000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000a6d616b6b652e6e65617200000000000000000000000000000000000000000000";
        let expected_root =
            "73733f420161b4189ea48140489bfada55d485fd580ab7e6f0f4b6de229f5177";
        let key = "820137";
        let proof_rlp = vec!["f90131a07dc6deefc13acb3456defc30824e9ba7d344e0fed67d6fe918a845ac6c7ff68ca00743abb9e8a2419e731aabac46e87dd9166ef04f4c0e17b607f699169fd16effa0de6439dd92daf3fe5ae984f9176a1d53f0ab2c03a73ea9ee2c94c79a87b82386a08eccde52f7cdcfa2207e2e8256bbd05a78fbab4f1b564a98a7f5b259b9fcb05da0196a72fd5279acc9146896618d5a134398bfc5d84063bcb2dc4f206bceb1526fa0daa3100c65bc47d986741898d7dfa1cc2f944d9f621b33a53d52047d98ab6e84a0126a9c69a2fb01312dffd739ee2a86c15106497d5e53314875e3a83c915b40c3a0b89b77f6776de33f0d291891d4271546d3b4946325f6fa66d38a1618f699b7b0a06b4f2fac50925da7c11ddac2321257cf157d426bffedcce8c3e999f8dd3902ff8080808080808080", "f871a073170337a44a638efb6d735150b3a06346b54b6176c9424307e6c1f4a4604131a0409f60141274adbaf1fd8808c432c599025a80763a61aca8710ba5416436c885a064d0127fe80ad8301e425eece21dd4811515312fad7e95b9ad4f853d003582a88080808080808080808080808080", "e4820001a022d9ed1b1940164d904d587080c9ca1d5ebb7e711211233bee7ecf6f0fba3d8e", "f8d1a0af41ab83382da16fba21a258c18a231957c14eb91ede9b75b089d37474efe1b8a0102af48a2d48aa200cb90bafdb43c3845ed09e2d34f333944ac7c172f2becec4a0644f776baaf4dd2a45e817c3b70ed881419f31d966debf0e2dac62426b1308eea08498703814dfa09c76b9f8dde1d5e3865b92b805e9ffd77d12cd8221497fe604a02a6a5cc557e67488aef767895f2ad789fa339aab229d7e94b78d6a8187989d3ea002ec005b9dafdfd58601cd6dc96fd958a8681981442c485c87142ae85acc1fd28080808080808080808080", "f90211a02e04ddc4ab28665d70404d04601838d03b219207d68a477e086144d5452b035ea07458b1e7734dcde7a48e763f57b533d39a9893b2fd05ece758eb95c45230b69aa05ce53207da7cb7efdfa60bfc57dc23a5469d2823ac6d94377fda37d7d6e77a23a0ba360fa8bb757bec0086b0d2973bb39de6b874ae3558e0b91eb54579022bc68fa023068af8cff2927c6c437840b4bee730c5ef2d918c0bb086b453da9071f3e3a8a05a6cb3455636113070e724682c1e852b564bc26195690b57adf95b03e453fb56a090e6afaa341c8c8583ba621e0f4369e0a36e488d167061bf0627c8de8e4b1b53a0c974bc6676b17c2e0e0016b86e2261cc69fa10b06ad22938f851674c853face6a0134724224ee173faf5807c3b963e4aff5d8435c2296230ba6fbdf222262ee7a5a0ea6f74b84a4ee7f7d557bb27e61c75ae30ead9092faab3b441c4e5055c8768d7a09e5ab3942cfe8410180611c7eddb2364ba2022e53971b50250636f2576f1528fa0fe27620c114d5ce5b8c96859b754cf0a40a9a0cb7a6c88a492ca906b09db6c5aa023558ac1d7facb4cb81d5ced13c9126b70a898a81b63fe52117792ed5bcadb06a00b52d0a4cd96595521a0783e6f17de8b9bdd15f1e50ab8b51179a98ae6df18e5a0462c433d431953bcead5900c4b372c60b20280d05366fe48de6384152cfc8da9a0a5a9b086a22dc344a40496a9de4ebab616fa87dfc77760eef7939ba51dd193cd80", "f902ad20b902a9f902a60183af4adfb9010000000000000000000000000000000000000000000000000000000000000000000800010000000000000002000100000000000000000000000000000000000000000000000000000008000008000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000010000000040000000000000000000000000000000200000000010000000000000000000000000000000000200080000000202000000000000000000000000000004000000000000002000000000000000000000000000000000000080000000000000000000000000000000000000000000200000004000000000000000000000000000000f9019bf89b94a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000c22df065a81f6e0107e214991b9d7fb179d401b3a000000000000000000000000023ddd3e3692d1861ed57ede224608875809e127fa00000000000000000000000000000000000000000000000000000000005f5e100f8fc9423ddd3e3692d1861ed57ede224608875809e127ff863a0dd85dc56b5b4da387bf69c28ec19b1d66e793e0d51b567882fa31dc50bbd32c5a0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48a0000000000000000000000000c22df065a81f6e0107e214991b9d7fb179d401b3b8800000000000000000000000000000000000000000000000000000000005f5e1000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000a6d616b6b652e6e65617200000000000000000000000000000000000000000000"];

        let expected_root =
            H256::from_slice((hex::decode(expected_root).unwrap()).as_slice());
        let key = hex::decode(key).unwrap();
        let proof = proof_rlp
            .into_iter()
            .map(|x| hex::decode(x).unwrap())
            .collect();
        let expected_value = hex::decode(expected_value).unwrap();

        assert_eq!(
            TrieProver::verify_trie_proof(expected_root, key, proof),
            expected_value
        );
    }

    #[test]
    fn log_test() {
        let hardcoded_logs = r#"[{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xe77f587aa74084fff834b53ccbab07695ee4594b9c9d5bfd8a7dd80c556124b5","0x257f2c6491d6c856064b4db1c26a30b7b92fb6c576e3680f18c08d0ab21f5818"],"data":"0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006310d222","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x2","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xe77f587aa74084fff834b53ccbab07695ee4594b9c9d5bfd8a7dd80c556124b5","0x17c09463d80e8f5fbcc534a86e8cef3c8d4f0c6e7ef4c45dc1461951feb58819"],"data":"0x0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000006310d222","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x3","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xf3843eddcfcac65d12d9f26261dab50671fdbf5dc44441816c8bbdace2411afd"],"data":"0x257f2c6491d6c856064b4db1c26a30b7b92fb6c576e3680f18c08d0ab21f58180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a82574e8d678a19c77a2e6a86a01c18227f7a51d6b645fe67b5e45f7580a253620ca7bb35e58dbae2478cde72f2981869d7cfb4008906298074b104ba6976bdcbeeaac1ba8f1d7acc9880676be3626d672a5ad99677d40713cca3ff2abf3b31b7a8565fbb3113ef7eee0df214688feccdf995e4150e80ab2f1a0b43a7f6f1cb2e433ea70ad928af8a3770d89bad82a8d58728b7dc5d652db1d4ff8969de39d727c9668e6283dbc1f91000000000000000000000000000000000000000000000000","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x4","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xf3843eddcfcac65d12d9f26261dab50671fdbf5dc44441816c8bbdace2411afd"],"data":"0x17c09463d80e8f5fbcc534a86e8cef3c8d4f0c6e7ef4c45dc1461951feb588190000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a8254099ebdc92522ca02e2d32122edd5b04d51ad9225513c1497a1ba03f0a045ddc1f33e3fefafa56996efffe45361b925d60f56a677de716b7a49916477c701f8add928642d113fa58fac410b8d9d2ed14911207252350f12b7758ff9a48a11bc5c9a3d9b7519ea19c22205eb640765647e94630511c92f17dd77495d2c0aabe1f930ba01d77e1e6eafd705d170fb4a1233afbcd3d3a32bfad70e1b7499e898b599673393719876a000000000000000000000000000000000000000000000000","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x5","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0x5e58f77bbf94b46d8d896e29753e4458c6e59b48581e20ed58c9558e96f297ce"],"data":"0x06923b61ff01c9f9a7e48c80dfc985c522be8209b60b99cf4d5c5628ced5ccf0","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x6","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0x5e58f77bbf94b46d8d896e29753e4458c6e59b48581e20ed58c9558e96f297ce"],"data":"0x134fc696910ef43a6337f21a670c7bc37207eb0591725e7bdb7ccdf63fa13a30","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x7","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xe77f587aa74084fff834b53ccbab07695ee4594b9c9d5bfd8a7dd80c556124b5","0x088378cc31853c6c3c2cc1aca731db5011ea18b04755c8d505c7fbfd344d0391"],"data":"0x0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000006310d4f5","blockHash":"0x1398693168c246210dd8570c8875829aa73242111b6683332cfe937356a2f090","blockNumber":"0x3ca","transactionHash":"0x12cc598c2f541eb9957e7da668ea0de0a4f01d82616ff826e94564591e4ac687","transactionIndex":"0x0","logIndex":"0x2","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xe77f587aa74084fff834b53ccbab07695ee4594b9c9d5bfd8a7dd80c556124b5","0x1090f545c8bd7a2c1ee78ec319d3f62677daa4db84eda439a339086ad7d34f68"],"data":"0x0000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000006310d4f5","blockHash":"0x1398693168c246210dd8570c8875829aa73242111b6683332cfe937356a2f090","blockNumber":"0x3ca","transactionHash":"0x12cc598c2f541eb9957e7da668ea0de0a4f01d82616ff826e94564591e4ac687","transactionIndex":"0x0","logIndex":"0x3","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xf3843eddcfcac65d12d9f26261dab50671fdbf5dc44441816c8bbdace2411afd"],"data":"0x088378cc31853c6c3c2cc1aca731db5011ea18b04755c8d505c7fbfd344d03910000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a8c7cf655c866f1bc5cf79c9c47c95a49e6d70b14f7eedebe0c361f5c981642104010293140ef95e2106b45592e16b8902fb6267188daeef656764856ee780959b5e15d8db3c997642519ce2e63c76d4e73752f7c4f431fefb4b07a47bd365f6b8e27edd79ffed130ef12afdd7d77f8e167aeedd7b4ce1725648bf11175d76fc672fc8523a6afdb7cef09218037b49153966606d77336af9099ff0cdd9c6baa53af98e008edee7fd4b000000000000000000000000000000000000000000000000","blockHash":"0x1398693168c246210dd8570c8875829aa73242111b6683332cfe937356a2f090","blockNumber":"0x3ca","transactionHash":"0x12cc598c2f541eb9957e7da668ea0de0a4f01d82616ff826e94564591e4ac687","transactionIndex":"0x0","logIndex":"0x4","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xf3843eddcfcac65d12d9f26261dab50671fdbf5dc44441816c8bbdace2411afd"],"data":"0x1090f545c8bd7a2c1ee78ec319d3f62677daa4db84eda439a339086ad7d34f680000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a881157cb43196e12a22290964f519ad487a8940a7c65b8c2ba45a63834a84b635f334ff486ec9ee7882f3888be90aae0f39282f4bc9fe735947d04de8d62a17b32771059ee74096dc19b21bcb5d3f1c75baba8b420142678c5fa745fea110c1a460dec16c89d042258c099e4a5d2aefe60eadc99e8764b5fd02fb58e7d575129e020a29ef7e4c4d68263dde21fdaa54481cbfc4b85758bc675db994d87e26ca3cde7c9b336630b46f000000000000000000000000000000000000000000000000","blockHash":"0x1398693168c246210dd8570c8875829aa73242111b6683332cfe937356a2f090","blockNumber":"0x3ca","transactionHash":"0x12cc598c2f541eb9957e7da668ea0de0a4f01d82616ff826e94564591e4ac687","transactionIndex":"0x0","logIndex":"0x5","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0x5e58f77bbf94b46d8d896e29753e4458c6e59b48581e20ed58c9558e96f297ce"],"data":"0x0aaaac731967908591a2012b0374ec250c161fa6f201de88573bb5ebe084f1ef","blockHash":"0x1398693168c246210dd8570c8875829aa73242111b6683332cfe937356a2f090","blockNumber":"0x3ca","transactionHash":"0x12cc598c2f541eb9957e7da668ea0de0a4f01d82616ff826e94564591e4ac687","transactionIndex":"0x0","logIndex":"0x6","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0x5e58f77bbf94b46d8d896e29753e4458c6e59b48581e20ed58c9558e96f297ce"],"data":"0x1924753b38c5875e4b508414f8169c907309083fde417473e759ce476491dc85","blockHash":"0x1398693168c246210dd8570c8875829aa73242111b6683332cfe937356a2f090","blockNumber":"0x3ca","transactionHash":"0x12cc598c2f541eb9957e7da668ea0de0a4f01d82616ff826e94564591e4ac687","transactionIndex":"0x0","logIndex":"0x7","removed":false}]"#;

        let parsed_logs = parse_eth_get_logs(hardcoded_logs);

        let first_log: &Log = parsed_logs.first().unwrap();

        let hardcoded_header = r#"{"hash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","parentHash":"0xd04991f9278486f464a2fc98b89dd5660cd39f25d11b7efe65d0d6867cad2334","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","miner":"0x0000000000000000000000000000000000000000","stateRoot":"0x8ff3e1ec818ad268daf15cbf23143c8dbeafbef66ba91f8e2f872a9ce65fdd73","transactionsRoot":"0xb8a0f223582f8c741e5928109347a95068bd556c12678cce9df9ac37ca2b588a","receiptsRoot":"0x917599b14cc681aabcd9b2a2754701e071bacb0fa5a75b0ef83534f3de287599","number":"0xff","gasUsed":"0x19aedd","gasLimit":"0x1c9c380","extraData":"0x","logsBloom":"0x00000000000000001000000000000000000000000000000000000000000000000000000000400000000800000000004000000000004000000000000000200000000000000200000200000008000000000000000000000000000000000000000000002000000000000000200000000000000000000000000002000210000000000000000040000000000000000000000004000200000000000000000000000800020000000000000000002000000002000000000000000000000000000000000000000002000000000000012000200000000000000000000000000000000000000010000000002840000000400000000000000020000000000010000000000000","timestamp":"0x6310d222","difficulty":"0x1","totalDifficulty":"0x100","sealFields":[],"uncles":[],"transactions":["0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74"],"size":"0x8bb","mixHash":"0x0000000000000000000000000000000000000000000000000000000000000000","nonce":"0x0000000000000000","baseFeePerGas":"0x7"}"#;

        let header = parse_block_header(hardcoded_header);

        let hardcoded_receipt = r#"{"transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","from":"0x7e5f4552091a69125d5dfcb7b8c2659029395bdf","to":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","cumulativeGasUsed":"0x19aedd","gasUsed":"0x19aedd","contractAddress":null,"logs":[{"address":"0x7758f98c1c487e5653795470eeab6c4698be541b","topics":["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x0000000000000000000000007e5f4552091a69125d5dfcb7b8c2659029395bdf","0x000000000000000000000000bfce6b877ebff977bb6e80b24fbbb7bc4ebca4df"],"data":"0x000000000000000000000000000000000001ed09bead87c0378d8e61abf41c00","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x0","removed":false},{"address":"0x7758f98c1c487e5653795470eeab6c4698be541b","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x0000000000000000000000007e5f4552091a69125d5dfcb7b8c2659029395bdf","0x000000000000000000000000bfce6b877ebff977bb6e80b24fbbb7bc4ebca4df"],"data":"0x00000000000000000000000000000000000000000000000000000002540be400","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x1","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xe77f587aa74084fff834b53ccbab07695ee4594b9c9d5bfd8a7dd80c556124b5","0x257f2c6491d6c856064b4db1c26a30b7b92fb6c576e3680f18c08d0ab21f5818"],"data":"0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006310d222","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x2","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xe77f587aa74084fff834b53ccbab07695ee4594b9c9d5bfd8a7dd80c556124b5","0x17c09463d80e8f5fbcc534a86e8cef3c8d4f0c6e7ef4c45dc1461951feb58819"],"data":"0x0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000006310d222","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x3","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xf3843eddcfcac65d12d9f26261dab50671fdbf5dc44441816c8bbdace2411afd"],"data":"0x257f2c6491d6c856064b4db1c26a30b7b92fb6c576e3680f18c08d0ab21f58180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a82574e8d678a19c77a2e6a86a01c18227f7a51d6b645fe67b5e45f7580a253620ca7bb35e58dbae2478cde72f2981869d7cfb4008906298074b104ba6976bdcbeeaac1ba8f1d7acc9880676be3626d672a5ad99677d40713cca3ff2abf3b31b7a8565fbb3113ef7eee0df214688feccdf995e4150e80ab2f1a0b43a7f6f1cb2e433ea70ad928af8a3770d89bad82a8d58728b7dc5d652db1d4ff8969de39d727c9668e6283dbc1f91000000000000000000000000000000000000000000000000","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x4","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0xf3843eddcfcac65d12d9f26261dab50671fdbf5dc44441816c8bbdace2411afd"],"data":"0x17c09463d80e8f5fbcc534a86e8cef3c8d4f0c6e7ef4c45dc1461951feb588190000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a8254099ebdc92522ca02e2d32122edd5b04d51ad9225513c1497a1ba03f0a045ddc1f33e3fefafa56996efffe45361b925d60f56a677de716b7a49916477c701f8add928642d113fa58fac410b8d9d2ed14911207252350f12b7758ff9a48a11bc5c9a3d9b7519ea19c22205eb640765647e94630511c92f17dd77495d2c0aabe1f930ba01d77e1e6eafd705d170fb4a1233afbcd3d3a32bfad70e1b7499e898b599673393719876a000000000000000000000000000000000000000000000000","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x5","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0x5e58f77bbf94b46d8d896e29753e4458c6e59b48581e20ed58c9558e96f297ce"],"data":"0x06923b61ff01c9f9a7e48c80dfc985c522be8209b60b99cf4d5c5628ced5ccf0","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x6","removed":false},{"address":"0xbfce6b877ebff977bb6e80b24fbbb7bc4ebca4df","topics":["0x5e58f77bbf94b46d8d896e29753e4458c6e59b48581e20ed58c9558e96f297ce"],"data":"0x134fc696910ef43a6337f21a670c7bc37207eb0591725e7bdb7ccdf63fa13a30","blockHash":"0xcdb049f4d745b7c338cd491cab3ed14e631f83bc7ca41bcdbde6d518c3a8417f","blockNumber":"0xff","transactionHash":"0xe6c743ba8232f2ab48bc627b63a0c86b26861ff9d984b5d78b155e8e8497bb74","transactionIndex":"0x0","logIndex":"0x7","removed":false}],"status":"0x1","logsBloom":"0x08000000000000001000000000000000000000000000000000000000000000000000000000400000000800000000004000000000004000000000000000200000000000000200000200000008000000000000000000000000000000000000000000002000000000000000200000000000000000000000000002000210000000000000000040000000000000000000000004000200000000000000000000000800020000000000000000002000000002000000000000000000000000000000000000000002000000000000012000200000000000000000000000000000000000000010000000002840000000400000000000000020000000000010000000000000","type":"0x2","effectiveGasPrice":"0x59682f07"}"#;

        let receipt = parse_receipt(hardcoded_receipt);

        let proof = rlp::decode::<Vec<u8>>(hex::decode("f90739f90736822080b90730f9072d018319aeddb9010008000000000000001000000000000000000000000000000000000000000000000000000000400000000800000000004000000000004000000000000000200000000000000200000200000008000000000000000000000000000000000000000000002000000000000000200000000000000000000000000002000210000000000000000040000000000000000000000004000200000000000000000000000800020000000000000000002000000002000000000000000000000000000000000000000002000000000000012000200000000000000000000000000000000000000010000000002840000000400000000000000020000000000010000000000000f90622f89b947758f98c1c487e5653795470eeab6c4698be541bf863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a00000000000000000000000007e5f4552091a69125d5dfcb7b8c2659029395bdfa0000000000000000000000000bfce6b877ebff977bb6e80b24fbbb7bc4ebca4dfa0000000000000000000000000000000000001ed09bead87c0378d8e61abf41c00f89b947758f98c1c487e5653795470eeab6c4698be541bf863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa00000000000000000000000007e5f4552091a69125d5dfcb7b8c2659029395bdfa0000000000000000000000000bfce6b877ebff977bb6e80b24fbbb7bc4ebca4dfa000000000000000000000000000000000000000000000000000000002540be400f89b94bfce6b877ebff977bb6e80b24fbbb7bc4ebca4dff842a0e77f587aa74084fff834b53ccbab07695ee4594b9c9d5bfd8a7dd80c556124b5a0257f2c6491d6c856064b4db1c26a30b7b92fb6c576e3680f18c08d0ab21f5818b8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006310d222f89b94bfce6b877ebff977bb6e80b24fbbb7bc4ebca4dff842a0e77f587aa74084fff834b53ccbab07695ee4594b9c9d5bfd8a7dd80c556124b5a017c09463d80e8f5fbcc534a86e8cef3c8d4f0c6e7ef4c45dc1461951feb58819b8400000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000006310d222f9017a94bfce6b877ebff977bb6e80b24fbbb7bc4ebca4dfe1a0f3843eddcfcac65d12d9f26261dab50671fdbf5dc44441816c8bbdace2411afdb90140257f2c6491d6c856064b4db1c26a30b7b92fb6c576e3680f18c08d0ab21f58180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a82574e8d678a19c77a2e6a86a01c18227f7a51d6b645fe67b5e45f7580a253620ca7bb35e58dbae2478cde72f2981869d7cfb4008906298074b104ba6976bdcbeeaac1ba8f1d7acc9880676be3626d672a5ad99677d40713cca3ff2abf3b31b7a8565fbb3113ef7eee0df214688feccdf995e4150e80ab2f1a0b43a7f6f1cb2e433ea70ad928af8a3770d89bad82a8d58728b7dc5d652db1d4ff8969de39d727c9668e6283dbc1f91000000000000000000000000000000000000000000000000f9017a94bfce6b877ebff977bb6e80b24fbbb7bc4ebca4dfe1a0f3843eddcfcac65d12d9f26261dab50671fdbf5dc44441816c8bbdace2411afdb9014017c09463d80e8f5fbcc534a86e8cef3c8d4f0c6e7ef4c45dc1461951feb588190000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a8254099ebdc92522ca02e2d32122edd5b04d51ad9225513c1497a1ba03f0a045ddc1f33e3fefafa56996efffe45361b925d60f56a677de716b7a49916477c701f8add928642d113fa58fac410b8d9d2ed14911207252350f12b7758ff9a48a11bc5c9a3d9b7519ea19c22205eb640765647e94630511c92f17dd77495d2c0aabe1f930ba01d77e1e6eafd705d170fb4a1233afbcd3d3a32bfad70e1b7499e898b599673393719876a000000000000000000000000000000000000000000000000f85894bfce6b877ebff977bb6e80b24fbbb7bc4ebca4dfe1a05e58f77bbf94b46d8d896e29753e4458c6e59b48581e20ed58c9558e96f297cea006923b61ff01c9f9a7e48c80dfc985c522be8209b60b99cf4d5c5628ced5ccf0f85894bfce6b877ebff977bb6e80b24fbbb7bc4ebca4dfe1a05e58f77bbf94b46d8d896e29753e4458c6e59b48581e20ed58c9558e96f297cea0134fc696910ef43a6337f21a670c7bc37207eb0591725e7bdb7ccdf63fa13a30").unwrap().as_slice()).unwrap();

        println!(
            "log verify {:?}",
            TrieProver::verify_log_entry(
                first_log.log_index.unwrap().as_u64(),
                first_log.data.to_vec(),
                0,
                rlp::encode(&receipt).to_vec(),
                rlp::encode(&header).to_vec(),
                vec![proof],
            ),
        );
    }
}
